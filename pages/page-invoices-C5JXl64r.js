import{j as e,ai as j,aj as p,a6 as w,y as d,ak as f,al as g,c as v}from"../vendors/react-vendor-hK-5f_D1.js";import{A as y}from"../chunks/app-layout-x6aAtCUX.js";import{B as u,D as b,b as C,c as S,d as N,I as R,e as M,f as D,g as m,h as F,i as I,j as x}from"../chunks/components-Ka3gNCTn.js";import{g as P,b as T,d as E,e as k}from"../chunks/vendor-CLWvCSlX.js";function _(t){return new Intl.NumberFormat("en-US",{style:"currency",currency:t||"USD",minimumFractionDigits:2,maximumFractionDigits:2})}const A=[{accessorKey:"serial",header:"Serial"},{accessorKey:"total",header:({column:t})=>e.jsx("div",{className:"text-end",children:e.jsxs(u,{variant:"ghost",onClick:()=>t.toggleSorting(t.getIsSorted()==="asc"),children:["Amount",e.jsx(j,{className:"ml-2 h-4 w-4"})]})}),cell:({row:t})=>{const{total:n,currency:i}=t.original;return e.jsx("div",{className:"text-end",children:_(i).format(n)})}},{id:"actions",cell:({row:t})=>{const{id:n}=t.original;return e.jsx("div",{className:"text-end",children:e.jsxs(b,{children:[e.jsx(C,{asChild:!0,children:e.jsx(u,{variant:"outline",size:"icon-sm",children:e.jsx(p,{})})}),e.jsx(S,{align:"end",children:e.jsx(N,{asChild:!0,children:e.jsx(w,{to:`/edit/${n}`,children:"Edit"})})})]})})}}];function V({columns:t,data:n}){const[i,l]=d.useState([]),[c,r]=d.useState([]),s=f({data:n,columns:t,getCoreRowModel:k(),getPaginationRowModel:E(),onSortingChange:l,onColumnFiltersChange:r,getFilteredRowModel:T(),getSortedRowModel:P(),state:{sorting:i,columnFilters:c}});return e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center py-4",children:e.jsx(R,{placeholder:"Search by serial number",value:s.getColumn("serial")?.getFilterValue()??"",onChange:a=>s.getColumn("serial")?.setFilterValue(a.target.value),className:"max-w-sm"})}),e.jsx("div",{className:"overflow-hidden rounded-md border",children:e.jsxs(M,{children:[e.jsx(D,{children:s.getHeaderGroups().map(a=>e.jsx(m,{children:a.headers.map(o=>e.jsx(F,{children:o.isPlaceholder?null:g(o.column.columnDef.header,o.getContext())},o.id))},a.id))}),e.jsx(I,{children:s.getRowModel().rows?.length?s.getRowModel().rows.map(a=>e.jsx(m,{"data-state":a.getIsSelected()&&"selected",children:a.getVisibleCells().map(o=>e.jsx(x,{children:g(o.column.columnDef.cell,o.getContext())},o.id))},a.id)):e.jsx(m,{children:e.jsx(x,{colSpan:t.length,className:"h-24 text-center",children:"No results."})})})]})}),e.jsxs("div",{className:"flex items-center justify-end space-x-2 py-4",children:[e.jsxs("div",{className:"flex-1 text-sm text-muted-foreground",children:[s.getFilteredSelectedRowModel().rows.length," of"," ",s.getFilteredRowModel().rows.length," row(s) selected."]}),e.jsxs("div",{className:"space-x-2",children:[e.jsx(u,{variant:"outline",size:"sm",onClick:()=>s.previousPage(),disabled:!s.getCanPreviousPage(),children:"Previous"}),e.jsx(u,{variant:"outline",size:"sm",onClick:()=>s.nextPage(),disabled:!s.getCanNextPage(),children:"Next"})]})]})]})}async function z(){return JSON.parse(localStorage.getItem("invoice-database")||"[]").map(l=>({id:l.id,serial:l.serial,total:l.amount.total,currency:l.amount.currency}))}function $(){const t=v.c(7),[n,i]=d.useState(null);let l,c;t[0]===Symbol.for("react.memo_cache_sentinel")?(l=()=>{(async function(){const h=await z();i(h)})()},c=[],t[0]=l,t[1]=c):(l=t[0],c=t[1]),d.useEffect(l,c);let r;t[2]!==n?(r=n&&e.jsx(V,{columns:A,data:n}),t[2]=n,t[3]=r):r=t[3];let s;t[4]===Symbol.for("react.memo_cache_sentinel")?(s=e.jsx("p",{className:"italic",children:"Your data stays on your device only, and it gets removed whenever you clear your browser cache."}),t[4]=s):s=t[4];let a;return t[5]!==r?(a=e.jsx(y,{children:e.jsxs("div",{className:"p-4",children:[r,s]})}),t[5]=r,t[6]=a):a=t[6],a}export{$ as I};
